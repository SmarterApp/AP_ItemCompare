package org.opentestsystem.ap.itemcompare.report;

import lombok.extern.slf4j.Slf4j;

import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.StandardOpenOption;

@Slf4j
public class ItemReportFile {

    private Path reportFile;

    public ItemReportFile(Path itemReportPath, String itemId) {
       reportFile = itemReportPath.resolve(itemId + ".csv");
       try {
           Files.write(reportFile, "ItemId,FileName,DifferenceType,Element,ImportValue,TimsValue\n".getBytes());
       } catch (Exception ex) {
           log.error("Unable to write item report file", ex);
       }
    }

    public void write(String value) {
        try {
            value = value + "\n";
            Files.write(reportFile, value.getBytes(), StandardOpenOption.APPEND);
        } catch (Exception ex) {
            log.error("Unable to write item report file", ex);
        }
    }
}
